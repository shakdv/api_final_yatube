
# Проект «API для Yatube»

Yatube — это социальная сеть для блогеров с возможностью публикации личных дневников с системами комментирования и подписок.

## Технологии
* Python
* Django
* DRF
* JWT
## Установка и запуск

Клонировать репозиторий и перейти в него в командной строке:

```
git clone https://github.com/shakdv/api_final_yatube.git
```

```
cd yatube_api
```

Создать и активировать виртуальное окружение:
```
python3 -m venv env
```

```
source env/bin/activate
```

```
python3 -m pip install --upgrade pip
```

Установить зависимости из файла requirements.txt:
```
pip install -r requirements.txt
```

Выполнить миграции:
```
python3 manage.py migrate
```

Создаем суперпользователя:
```
python3 manage.py createsuperuser
```

Запустить проект:
```
python3 manage.py runserver
```

## Пользователи и группы
Операции по добавлению, изменению и удалению пользователей и групп (соообществ) через API не предусмотрено.
Для этих операций предлагается использование админки Django по адресу http://127.0.0.1:8000/admin/

## Разграничение доступа и аутентификация

У неаутентифицированных пользователей доступ к API только на чтение.

Исключение — эндпоинт `/follow/`: доступ к нему предоставляется только аутентифицированным пользователям.

Для аутентификации используются JWT-токены.

Для работы с JWT в Django используются библиотеки [Djoser](https://djoser.readthedocs.io/en/latest/getting_started.html) и [Simple JWT](https://django-rest-framework-simplejwt.readthedocs.io/).

Аутентифицированным пользователям разрешено изменение и удаление своего контента;
в остальных случаях доступ предоставляется только для чтения.

## Документация по API Yatube
Когда вы запустите проект, по адресу http://127.0.0.1:8000/redoc/ будет доступна документация для API Yatube.
В документации описано, как работает API.
Документация представлена в формате Redoc.

### Примеры работы с API для JWT-токенов
#### Получить JWT-токен
Выполнить POST-запрос,
```
POST /api/v1/jwt/create/
```
передав в body

```
{
    "username": "string",
    "password": "string"
}
```
Полученный токен добавляем в headers при запросах, чтобы были доступны все функции проекта:
```
Authorization: Bearer {your_token}
```

#### Обновить JWT-токен
Выполнить POST-запрос,
```
POST /api/v1/jwt/refresh/
```
передав в body
```
{
    "refresh": "string"
}
```

### Примеры работы с API для всех пользователей
Для неавторизованных пользователей работа с API доступна только в режиме чтения.

#### Получить список всех публикаций:
```
GET api/v1/posts/
```

#### Получить список публикаций с пагинацией через limit и offset:
```
GET api/v1/posts/?limit=10&offset=4 — десять постов, начиная с пятого.
```

#### Получить публикацию по id:
```
GET api/v1/posts/{id}/ - получение публикации по id
```

#### Получить список доступных групп (сообществ):
```
GET api/v1/groups/
```

#### Получить данные о группе (сообществе) по id:
``` 
GET api/v1/groups/{id}/
```

#### Получить все комментарии к публикации:
```
GET api/v1/{post_id}/comments/
```

#### Получить комментарий к публикации по id:
```
GET api/v1/{post_id}/comments/{id}/
```

### Примеры работы с API для авторизованных пользователей
#### Добавить новую публикацию в коллекцию публикаций:
```
POST /api/v1/posts/
```
передав в body:
```
{
    "text": "string",
    "image": "string",
    "group": 1
}
```

#### Обновить публикацию по id:
```
PUT /api/v1/posts/{id}/
```
передав в body:
```
{
    "text": "string",
    "image": "string",
    "group": 1
}
```

#### Удалить публикацию по id:
```
DELETE /api/v1/posts/{id}/
```
